<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 26. Scheduled Messages</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" http-equiv="Content-Type" content="text/html; charset=UTF-8"/><link rel="home" href="index.html" title="HornetQ User Manual"/><link rel="up" href="index.html" title="HornetQ User Manual"/><link rel="prev" href="queue-attributes.html" title="Chapter 25. Queue Attributes"/><link rel="next" href="last-value-queues.html" title="Chapter 27. Last-Value Queues"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="queue-attributes.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="last-value-queues.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="scheduled-messages"/>Chapter 26. Scheduled Messages</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="scheduled-messages.html#d0e5560">26.1. Scheduled Delivery Property</a></span></dt><dt><span class="section"><a href="scheduled-messages.html#d0e5580">26.2. Example</a></span></dt></dl></div><p>Scheduled messages differ from normal messages in that they won't be delivered until a
      specified time in the future, at the earliest.</p><p>To do this, a special property is set on the message before sending it.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5560"/>26.1. Scheduled Delivery Property</h2></div></div></div><p>The property name used to identify a scheduled message is <code class="literal">"_HQ_SCHED_DELIVERY"</code> (or the constant <code class="literal">Message.HDR_SCHEDULED_DELIVERY_TIME</code>).</p><p>The specified value must be a positive <code class="literal">long</code> corresponding to the time the
         message must be delivered (in milliseconds). An example of sending a scheduled message
         using the JMS API is as follows.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
TextMessage message = session.createTextMessage("This is a scheduled message message which will be delivered in 5 sec.");
message.setLongProperty("_HQ_SCHED_DELIVERY", System.currentTimeMillis() + 5000);
producer.send(message);

...

// message will not be received immediately but 5 seconds later
TextMessage messageReceived = (TextMessage) consumer.receive();</pre><p>Scheduled messages can also be sent using the core API, by setting the same property on
         the core message before sending.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5580"/>26.2. Example</h2></div></div></div><p>See <a class="xref" href="examples.html#examples.scheduled-message" title="11.1.64. Scheduled Message">Section 11.1.64, “Scheduled Message”</a> for an example which shows how
         scheduled messages can be used with JMS.</p></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="queue-attributes.html"><strong>Prev</strong>Chapter 25. Queue Attributes</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="last-value-queues.html"><strong>Next</strong>Chapter 27. Last-Value Queues</a></li></ul></body></html>