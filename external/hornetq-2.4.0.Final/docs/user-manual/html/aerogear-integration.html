<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 46. AeroGear Integration</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" http-equiv="Content-Type" content="text/html; charset=UTF-8"/><link rel="home" href="index.html" title="HornetQ User Manual"/><link rel="up" href="index.html" title="HornetQ User Manual"/><link rel="prev" href="spring.integration.html" title="Chapter 45. Spring Integration"/><link rel="next" href="intercepting-operations.html" title="Chapter 47. Intercepting Operations"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="spring.integration.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="intercepting-operations.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="aerogear-integration"/>Chapter 46. AeroGear Integration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="aerogear-integration.html#d0e13765">46.1. Configuring an AeroGear Connector Service</a></span></dt><dt><span class="section"><a href="aerogear-integration.html#d0e13847">46.2. How to send a message for AeroGear</a></span></dt></dl></div><p>AeroGears push technology provides support for different push notification technologies like Google Cloud Messaging,
        Apple's APNs or Mozilla's SimplePush. HornetQ allows you to configure a Connector Service that will consume messages
    from a queue and forward them to an AeroGear push server and subsequently sent as notifications to mobile devices.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13765"/>46.1. Configuring an AeroGear Connector Service</h2></div></div></div><p>AeroGear Connector services are configured in the connector-services configuration:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
    &lt;connector-service name="aerogear-connector"&gt;
    &lt;factory-class&gt;org.hornetq.integration.aerogear.AeroGearConnectorServiceFactory&lt;/factory-class&gt;
    &lt;param key="endpoint" value="endpoint"/&gt;
    &lt;param key="queue" value="jms.queue.aerogearQueue"/&gt;
    &lt;param key="application-id" value="an applicationid"/&gt;
    &lt;param key="master-secret" value="a mastersecret"/&gt;
    &lt;/connector-service&gt;
    &lt;address-setting match="jms.queue.lastValueQueue"&gt;
    &lt;last-value-queue&gt;true&lt;/last-value-queue&gt;
    &lt;/address-setting&gt;
    </pre><p>Shown are the required params for the connector service and are:</p><div class="itemizedlist"><ul><li><p><code class="literal">endpoint</code>. The endpoint or URL of you AeroGear application.</p></li><li><p><code class="literal">queue</code>. The name of the queue to consume from.</p></li><li><p><code class="literal">application-id</code>. The application id of your mobile application in AeroGear.</p></li><li><p><code class="literal">master-secret</code>. The secret of your mobile application in AeroGear.</p></li></ul></div><p>As well as these required paramaters there are the following optional parameters</p><div class="itemizedlist"><ul><li><p><code class="literal">ttl</code>. The time to live for the message once AeroGear receives it.</p></li><li><p><code class="literal">badge</code>. The badge the mobile app should use for the notification.</p></li><li><p><code class="literal">sound</code>. The sound the mobile app should use for the notification.</p></li><li><p><code class="literal">filter</code>. A message filter(selector) to use on the connector.</p></li><li><p><code class="literal">retry-interval</code>. If an error occurs on send, how long before we try again to connect.</p></li><li><p><code class="literal">retry-attempts</code>. How many times we should try to reconnect after an error.</p></li><li><p><code class="literal">variants</code>. A comma separated list of variants that should get the message.</p></li><li><p><code class="literal">aliases</code>. A list of aliases that should get the message.</p></li><li><p><code class="literal">device-types</code>. A list of device types that should get the messag.</p></li></ul></div><p>More in depth explanations of the AeroGear related parameters can be found in the <a class="ulink" href="http://aerogear.org/push/">AeroGear Push docs</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13847"/>46.2. How to send a message for AeroGear</h2></div></div></div><p>To send a message intended for AeroGear simply send a JMS Message and set the appropriate headers, like so</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
    Message message = session.createMessage();

    message.setStringProperty("AEROGEAR_ALERT", "Hello this is a notification from HornetQ");

    producer.send(message);
        </pre><p>The 'AEROGEAR_ALERT' property will be the alert sent to the mobile device.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>If the message does not contain this property then it will be simply ignored and left on the queue</p></div><p>Its also possible to override any of the other AeroGear parameters by simply setting them on the message,
        for instance if you wanted to set ttl of a message you would:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
    message.setIntProperty("AEROGEAR_TTL", 1234);
        </pre><p>or if you wanted to set the list of variants you would use:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
    message.setStringProperty("AEROGEAR_VARIANTS", "variant1,variant2,variant3");
        </pre><p>Again refer to the AeroGear documentation for a more in depth view on how to use these settings</p></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="spring.integration.html"><strong>Prev</strong>Chapter 45. Spring Integration</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="intercepting-operations.html"><strong>Next</strong>Chapter 47. Intercepting Operations</a></li></ul></body></html>